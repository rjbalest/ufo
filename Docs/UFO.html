<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
<head>
  <meta http-equiv="content-type"
 content="text/html; charset=ISO-8859-1">
  <title>UFO</title>
</head>
<body>
<br>
<h1>UFO: a declarative object system for the web.</h1>
<span style="font-weight: bold;">Author: Russell Balest<br>
E-mail: russell@balest.com<br>
Copyright (C) 2004 Russell Balest<br>
<br>
</span>
<hr style="width: 100%; height: 2px;"><span style="font-weight: bold;"></span><br>
<big><big><span style="font-weight: bold;">Forward:<br>
</span></big></big>A few words to explain my view of progamming and the
main problem I try to solve.&nbsp;&nbsp; I like to think of the
elements of a computer program as existing in an abstract semantic
namespace, from which concrete representations can be
derived.&nbsp;&nbsp; The Filter program enables one to reach into this
abstract namespace and map the semantic elements into programming
languages.&nbsp; <br>
<br>
Generically referred to as 'UFO', this is a system for writing
object-oriented frameworks for web applications using a declarative
model based on XML.&nbsp; The main function of UFO is to generate code
artifacts derived from XML declarations.&nbsp; These artifacts are
things like PHP code and SQL statements for inserts, updates, and table
creation in a database, which together implement a simple object model
for web applications.&nbsp; This version of
UFO is written in
Python and while simple usage requires no knowledge of Python, more
advanced usage does require Python programming.&nbsp; The system is
extensible and currently has support for PHP, Postgres, and
MySql.&nbsp; The
main use of UFO has been, for me, in generating large amounts of PHP
and Sql in order to reduce the amount of manual coding and
duplication - thus reducing errors.&nbsp; Currently, UFO provides me a
good starting point by generating alot of initial PHP and SQL code
which I can then customize manually where I need to.&nbsp; The ongoing
goal is to refine UFO and improve its declarative capabilities in order
to reduce the amount of manual coding.<br>
<br>
I began using the term UFO in Summer of 2003, but the basic idea had
been evolving since 1997 or earlier, written in various languages along
the way from Perl to Tcl/Tk.&nbsp; The term became thoroughly congealed
when, in 2004, I wrote a web application for a startup called
'Uffinity'.&nbsp; Much of my code was using the prefix 'uf_', and my
base object class was 'uf_object'.&nbsp; So, I started thinking of
'ufo' as short for 'Uffinity Objects', which only reinforced the
acronym.&nbsp; These days I think of it as 'Ultra F**n Objects', or the
more politic 'Useful Fine Objects'.&nbsp;
UFO is an application of the <a href="Filter.html"><span
 style="font-weight: bold;">Filter</span></a>
system.<span style="font-style: italic;"></span><br>
&nbsp; <br>
<h2>Simple Usage<br>
</h2>
<br>
&nbsp;UFO comes with a simple implementation of a program to read an
XML file
containing a &lt;ufo&gt; definition, and output the PHP class and Sql
table creation code.<br>
This program is called parseUfo.py and the simplest usage is:<br>
<span style="font-weight: bold;">parseUfo.py &lt;ufoFile&gt;</span><br>
<br>
where:<br>
&lt;ufoFile&gt; is an XML file containing the definition of a UFO such
as:<br>
<br>
---------------<br>
<span style="font-weight: bold;">&lt;ufo&gt;</span><br
 style="font-weight: bold;">
<span style="font-weight: bold;">&lt;class name="device"
oid="foreign"&gt;</span><br style="font-weight: bold;">
<span style="font-weight: bold;">&lt;var name="type" type="enum"
constraint="gps_device" label="Device Type"&gt; gps_device &lt;/var&gt;</span><br
 style="font-weight: bold;">
<span style="font-weight: bold;">&lt;var name="carrier" type="enum"
constraint="wireless_carrier" label="Carrier"&gt; carrier &lt;/var&gt;</span><br
 style="font-weight: bold;">
<span style="font-weight: bold;">&lt;var name="phone_number"
type="string" constraint="phone_number" label="Phone Number"&gt; phone
&lt;/var&gt;</span><br style="font-weight: bold;">
<span style="font-weight: bold;">&lt;/class&gt;</span><br
 style="font-weight: bold;">
<span style="font-weight: bold;">&lt;/ufo&gt;</span><br>
---------------<br>
<br>
The above example will produce 3 additional output files:
<span style="font-weight: bold;">ufo_device.php, ufo_device_base.php</span>,
and <span style="font-weight: bold;">ufo_device.mysql</span>.&nbsp;&nbsp;
The prefix 'ufo' is
configurable and may be set to something more meaningful
to your project.&nbsp;&nbsp; Generally speaking, the
<span style="font-weight: bold;">ufo_device_base.php</span> file should
never be edited manually.&nbsp; Manual
implementations are reserved for the user subclass defined in
<span style="font-weight: bold;">ufo_device.php</span>, in this example.<br>
The contents of the mysql file is simply the SQL necessary for creation
of a table called 'ufo_device', predictably.&nbsp; The contents of the
.php file are much more complicated.&nbsp; But, basically, a PHP class
called ufo_device is defined along with several methods like:&nbsp;
create, load, edit, submit, view, update, and a constructor.&nbsp;
The persistence methods are created in the <span
 style="font-weight: bold;">ufo_device_base.php</span> file and
act to synchronize the PHP object with it's persistent
form in the database.&nbsp; The view method returns html code suitable
for viewing, and editing an object.&nbsp; These methods are callable
from http GET and POST methods using the UFO mapping specified
later.&nbsp; In addition, these objects will be instantiated and
invoked within a larger framework that includes a security model and a
layout model.<br>
<span style="font-weight: bold;"></span><br>
<h2>The UFO XML Schema Definition.<br>
</h2>
&nbsp;
Here, I will simply give the XML schema defintion.
<h2><br>
</h2>
<h2>The Generated PHP Base class.<br>
</h2>
&nbsp;
Here, I will simply show the output generated in the simple usage
above, and then discuss each method in detail.<span
 style="font-weight: bold;"><span style="font-weight: bold;"></span><br>
<br>
</span>
<h2>The Generated PHP Derived class.<br>
</h2>
&nbsp;
Here, I will simply show the output generated in the simple usage
above, and then discuss each method in detail.<span
 style="font-weight: bold;"><span style="font-weight: bold;"></span><br>
</span><br>
<h2>The Generated PHP Container class.<br>
</h2>
&nbsp;
Here, I will simply show the output generated in the simple usage
above, and then discuss each method in detail.<br>
<br>
<h2>Object Identification.<br>
</h2>
&nbsp;
Here, I will simply show the output generated in the simple usage
above, and then discuss each method in detail.<br>
<br>
<h2>URL Mapping to Objects.<br>
</h2>
<pre>The most general form of the URL mapping is as follows:<br><br>http://mydomain.com/main.php?page=&lt;page&gt;&amp;obj=&lt;obj&gt;&amp;method=&lt;method&gt;&amp;ufo[oid]=&lt;oid&gt;&amp;ufo[arg]=&lt;val&gt;...<br><br>Where 'main.php' is the single 'driver' page that dispatches to the correct object, depending on the query string.<br>All of the real object mapping takes place within the query string.  The file main.php may be renamed with no side effects.<br><br>The semantic concept of the query string can be stated in words thus:<br>1. Call a method, possibly with arguments, on some specified object.<br>2. Call the view() method on some (possibly different) object and output the return value of view().<br><br>Depending on the intent, some of the query parameters will be absent or optional.<br><br>If 'page' is present, the returned value is usually an html page.<br>If 'page' is not present, the returned value could be an html page or something else, like javascript data.<br><br>The remaining arguments map to an object model like this.  Given a class:<br><br>class machine {<br><br>      get memUsage(int time0, int time1);<br><br>};<br><br>One could call the memUsage method with a query string like this:<br><br>?obj=machine&amp;method=memUsage&amp;ufo[oid]=2372&amp;ufo[time1]=10223334&amp;ufo[time2]=1022396<br><br>Therefore we see that:<br><br>obj : represents a class name.<br><br>method : represents a method on that class.<br><br>ufo[] : is an array that represents the method arguments.<br><br>ufo[oid] : is the object id, and is the implicit first argument to all instance methods, in other words 'this' or 'self'.<br><br>If ufo[oid] is not present, this is equivalent to a 'static' or singleton object method.<br><br>When the 'page' argument is missing, the return value from such a method invocation is some javascript data structure.<br><br>If, in addition to the previous query string, the 'page' argument is also present, the meaning of this combination is to invoke the method call, and then return the named html page.<br><br></pre>
<br>
</body>
</html>
